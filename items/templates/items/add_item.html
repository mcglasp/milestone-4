{% extends "base.html" %}
{% load static %}
{% load price_tools %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <form method="POST" action="{% url 'add_item' %}" class="form mb-2" enctype="multipart/form-data">
                {% csrf_token %}
                <!-- {{ form.as_p }}
                {{ author_form | crispy }} -->
<div class="row">
    <div class="col-6">
                {{ form.title | as_crispy_field }}
                {{ form.author | as_crispy_field }}
                <button id="add_author_1">Add author</button>
            
               <p>Author first name
                {{ author_form.first_name | as_crispy_field }}</p>
              <p>Author surname {{ author_form.surname | as_crispy_field }}</p>  
              <button id="add_author_2">Add author</button>

              <input id="store-authors" class="form-control" type="text" value="" aria-label="readonly input example" readonly>
                {{ form.genre | as_crispy_field }}
                {{ form.age_range | as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.description | as_crispy_field }}
                {{ form.price | as_crispy_field }}
                {{ form.discount | as_crispy_field }}
                {{ form.set_sale_price | as_crispy_field }}
                {{ form.image | as_crispy_field }}
                Featured?
                {{ form.featured | as_crispy_field }}
            </div>
        </div>
                <div class="text-right">
                    <a href="{% url 'items' %}" class="btn btn-outline-black rounded-0">Cancel</a>
                    <button class="btn btn-black rounded 0" type="submit">Add Book To Shop</button>
                </div>
            </form>
            {% endblock %}
            {% block postloadjs %}
            <script src="{% static 'items/js/add_author.js' %}"></script>

            <script>
                // let authorList = []
                
                $("#add_author_1").click(function(){
                    let value = $("#id_author option:selected").text()
                  let current = $("#store-authors").val()
                  $("#store-authors").val(`${current} ${value},`)
                  
                });
                
                $("#add_author_2").click(function(){
                    let valueFirstname = $("#id_first_name").val()
                    let valueSurname = $("#id_surname").val()
                    let fullName = `${valueFirstname} ${valueSurname}`
                  let current = $("#store-authors").val()
                  $("#store-authors").val(`${current} ${fullName},`)
                });
                
                </script>
            {% endblock %}